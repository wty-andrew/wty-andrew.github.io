"use strict";(self.webpackChunkwty_blog=self.webpackChunkwty_blog||[]).push([[542],{1759:(o,t,e)=>{e.r(t),e.d(t,{CH:()=>k,assets:()=>g,chCodeConfig:()=>m,contentTitle:()=>u,default:()=>j,frontMatter:()=>C,metadata:()=>b,toc:()=>B});var n=e(1527),s=e(7793),r=e(3120),l=e(875),c=e(959),p=e(8630),i=e(1560),a=e(6521),d=e(280),h=e(8966);const y=o=>{const t=(0,h.Z)(`/models/${o}`),[e,n]=(0,c.useState)(null);return(0,c.useEffect)((()=>{const e=new d.Z;e.packages={clownbot_description:t},e.load(`${t}/urdf/${o}.urdf`,(o=>{o.rotation.x=-Math.PI/2,o.traverse((o=>o.castShadow=!0)),o.updateMatrixWorld(!0),n(o)}))}),[o]),e},f=()=>{const o=y("clownbot");return o&&(0,n.jsx)("primitive",{object:o,dispose:null})},D=()=>{const o=y("clownbot");return(0,p.C)((t=>{let{clock:{elapsedTime:e}}=t;if(o){const t=15*e,n=1.2*e;o.joints.base_link_to_left_wheel.setJointValue(t),o.joints.base_link_to_right_wheel.setJointValue(t),o.position.set(.5*Math.sin(n),0,.5*Math.cos(n)),o.rotation.set(-Math.PI/2,0,n)}})),o&&(0,n.jsx)("primitive",{object:o,dispose:null})},F=o=>{let{children:t,...e}=o;return(0,n.jsx)(i.Xz,{...e,children:(0,n.jsxs)(c.Suspense,{fallback:null,children:[(0,n.jsx)(a.z,{}),(0,n.jsx)("ambientLight",{intensity:.15}),(0,n.jsx)("directionalLight",{position:[-4,5,1]}),t]})})},C={title:"Load URDF with React Three Fiber"},u=void 0,b={id:"misc/r3f-urdf",title:"Load URDF with React Three Fiber",description:"URDF is the abbreviation of Unified Robot Description Format, which is an XML format for representing a robot model in ROS, we can display a model like above in browser with react three fiber through urdf-loaders.",source:"@site/notes/misc/r3f-urdf.mdx",sourceDirName:"misc",slug:"/misc/r3f-urdf",permalink:"/misc/r3f-urdf",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Load URDF with React Three Fiber"},sidebar:"tutorialSidebar",previous:{title:"Misc",permalink:"/category/misc"},next:{title:"Unorganized",permalink:"/category/unorganized"}},g={},k={annotations:r.ds,Code:r.EK},m={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:void 0,showCopyButton:void 0,themeName:"Best Themes - Catppuccin"},B=[{value:"Setup",id:"setup",level:2},{value:"Option 1",id:"option-1",level:3},{value:"Option 2",id:"option-2",level:3},{value:"Make the Model Move",id:"make-the-model-move",level:2},{value:"Notes",id:"notes",level:2}];function x(o){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",section:"section",sup:"sup",ul:"ul",...(0,s.a)(),...o.components};return k||A("CH",!1),k.Code||A("CH.Code",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="Best Themes - Catppuccin"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #cdd6f4;--ch-t-background: #282c34ff;--ch-t-lighter-inlineBackground: #282c34e6;--ch-t-editor-background: #282c34ff;--ch-t-editor-foreground: #cdd6f4;--ch-t-editor-lineHighlightBackground: #cdd6f411;--ch-t-editor-rangeHighlightBackground: #89dceb3f;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #585b70;--ch-t-focusBorder: #00000000;--ch-t-tab-activeBackground: #282c34ff;--ch-t-tab-activeForeground: #cba6f7;--ch-t-tab-inactiveBackground: #353740ff;--ch-t-tab-inactiveForeground: #6c7086;--ch-t-tab-border: #353740ff;--ch-t-tab-activeBorder: #cba6f7;--ch-t-editorGroup-border: #585b70;--ch-t-editorGroupHeader-tabsBackground: #353740ff;--ch-t-editorLineNumber-foreground: #7f849c;--ch-t-input-background: #313244;--ch-t-input-foreground: #cdd6f4;--ch-t-input-border: #00000000;--ch-t-icon-foreground: #cba6f7;--ch-t-sideBar-background: #131322;--ch-t-sideBar-foreground: #cdd6f4;--ch-t-sideBar-border: #00000000;--ch-t-list-activeSelectionBackground: #45475a;--ch-t-list-activeSelectionForeground: #cdd6f4;--ch-t-list-hoverBackground: #1e1e2e;--ch-t-list-hoverForeground: #cdd6f4; }'}}),"\n","\n","\n",(0,n.jsx)("div",{style:{height:400},children:(0,n.jsx)(F,{camera:{position:[.2,.2,.2]},children:(0,n.jsx)(f,{})})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"http://wiki.ros.org/urdf",children:"URDF"})," is the abbreviation of Unified Robot Description Format, which is an XML format for representing a robot model in ROS, we can display a model like above in browser with ",(0,n.jsx)(t.a,{href:"https://github.com/pmndrs/react-three-fiber",children:"react three fiber"}),(0,n.jsx)(t.sup,{children:(0,n.jsx)(t.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})," through ",(0,n.jsx)(t.a,{href:"https://github.com/gkjohnson/urdf-loaders",children:"urdf-loaders"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["In URDF, the location of a mesh file is specified under the ",(0,n.jsx)(t.code,{children:"filename"})," attribute of a mesh element with the format: ",(0,n.jsx)(t.code,{children:"package://<package_name>/path/to/<mesh_name>"}),", for example:"]}),"\n",(0,n.jsx)(k.Code,{codeConfig:m,northPanel:{tabs:["my_pkg/urdf/foo.urdf"],active:"my_pkg/urdf/foo.urdf",heightRatio:1},files:[{name:"my_pkg/urdf/foo.urdf",mark:"3",focus:"",code:{lines:[{tokens:[{content:"...",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"<",props:{style:{color:"#7F849C"}}},{content:"geometry",props:{style:{color:"#CBA6F7"}}},{content:">",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"  <",props:{style:{color:"#7F849C"}}},{content:"mesh ",props:{style:{color:"#CBA6F7"}}},{content:"filename",props:{style:{color:"#89B4FA"}}},{content:"=",props:{style:{color:"#CDD6F4"}}},{content:'"package://my_pkg/meshes/bar.dae"',props:{style:{color:"#A6E3A1"}}},{content:"/>",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"</",props:{style:{color:"#7F849C"}}},{content:"geometry",props:{style:{color:"#CBA6F7"}}},{content:">",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"...",props:{style:{color:"#CDD6F4"}}}]}],lang:"xml"},annotations:[{focus:"3",Component:k.annotations.mark}]}]}),"\n",(0,n.jsx)(t.p,{children:"However, URDF Loader doesn't know where to fetch the mesh files from the given path, we have two options:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["edit the URDF file by replacing all the ",(0,n.jsx)(t.code,{children:"package://<package_name>"})," part with the relative path"]}),"\n",(0,n.jsxs)(t.li,{children:["use the ",(0,n.jsx)(t.code,{children:"packages"})," option",(0,n.jsx)(t.sup,{children:(0,n.jsx)(t.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})," of URDF Loader to resolve the paths"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"setup",children:"Setup"}),"\n",(0,n.jsx)(t.p,{children:"Consider the following ROS package structure"}),"\n",(0,n.jsx)(k.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",mark:"3:7",focus:"",code:{lines:[{tokens:[{content:"my_pkg/",props:{}}]},{tokens:[{content:"\u251c\u2500\u2500 launch/",props:{}}]},{tokens:[{content:"\u251c\u2500\u2500 meshes/",props:{}}]},{tokens:[{content:"\u2502   \u251c\u2500\u2500 bar.dae",props:{}}]},{tokens:[{content:"\u2502   \u2514\u2500\u2500 baz.dae",props:{}}]},{tokens:[{content:"\u251c\u2500\u2500 urdf/",props:{}}]},{tokens:[{content:"\u2502   \u2514\u2500\u2500 foo.urdf",props:{}}]},{tokens:[{content:"\u251c\u2500\u2500 CMakeLists.txt",props:{}}]},{tokens:[{content:"\u2514\u2500\u2500 package.xml",props:{}}]}],lang:"text"},annotations:[{focus:"3:7",Component:k.annotations.mark}]}]}),"\n",(0,n.jsx)(t.p,{children:"The mesh/URDF files should be copied into the public (static assets) folder of web server, assume no prefix for static files url"}),"\n",(0,n.jsx)(k.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",mark:"4:10",focus:"",code:{lines:[{tokens:[{content:"app/",props:{}}]},{tokens:[{content:"\u251c\u2500\u2500 src/",props:{}}]},{tokens:[{content:"\u251c\u2500\u2500 public/",props:{}}]},{tokens:[{content:"\u2502   \u251c\u2500\u2500 models/",props:{}}]},{tokens:[{content:"\u2502   \u2502   \u2514\u2500\u2500 foo/",props:{}}]},{tokens:[{content:"\u2502   \u2502       \u251c\u2500\u2500 meshes/",props:{}}]},{tokens:[{content:"\u2502   \u2502       \u2502   \u251c\u2500\u2500 bar.dae",props:{}}]},{tokens:[{content:"\u2502   \u2502       \u2502   \u2514\u2500\u2500 baz.dae",props:{}}]},{tokens:[{content:"\u2502   \u2502       \u2514\u2500\u2500 urdf/",props:{}}]},{tokens:[{content:"\u2502   \u2502           \u2514\u2500\u2500 foo.urdf",props:{}}]},{tokens:[{content:"\u2502   \u2514\u2500\u2500 index.html",props:{}}]},{tokens:[{content:"\u2514\u2500\u2500 package.json",props:{}}]}],lang:"text"},annotations:[{focus:"4:10",Component:k.annotations.mark}]}]}),"\n",(0,n.jsx)(t.h3,{id:"option-1",children:"Option 1"}),"\n",(0,n.jsxs)(t.p,{children:["Simply change all the occurrence of ",(0,n.jsx)(t.code,{children:"package://my_pkg"})," to ",(0,n.jsx)(t.code,{children:".."})," in URDF file, then use the ",(0,n.jsx)(t.code,{children:"useLoader"})," hook from r3f"]}),"\n",(0,n.jsx)(k.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"{",props:{style:{color:"#7F849C"}}},{content:" useLoader ",props:{style:{color:"#CDD6F4"}}},{content:"} ",props:{style:{color:"#7F849C"}}},{content:"from ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"'@react-three/fiber'",props:{style:{color:"#A6E3A1"}}}]},{tokens:[{content:"import",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" URDFLoader, ",props:{style:{color:"#CDD6F4"}}},{content:"{",props:{style:{color:"#7F849C"}}},{content:" URDFRobot ",props:{style:{color:"#CDD6F4"}}},{content:"} ",props:{style:{color:"#7F849C"}}},{content:"from ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"'urdf-loader'",props:{style:{color:"#A6E3A1"}}}]},{tokens:[{content:"",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"const",props:{style:{color:"#F38BA8"}}},{content:" FOO_URDF_URL ",props:{style:{color:"#CDD6F4"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"'./models/foo/urdf/foo.urdf'",props:{style:{color:"#A6E3A1"}}}]},{tokens:[{content:"",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"const ",props:{style:{color:"#F38BA8"}}},{content:"Model ",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"() ",props:{style:{color:"#7F849C"}}},{content:"=> ",props:{style:{color:"#F38BA8"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"  const",props:{style:{color:"#F38BA8"}}},{content:" robot",props:{style:{color:"#CDD6F4"}}},{content:": ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"URDFRobot ",props:{style:{color:"#FAB387"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"useLoader",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(URDFLoader ",props:{style:{color:"#CDD6F4"}}},{content:"as ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"any",props:{style:{color:"#FAB387"}}},{content:", FOO_URDF_URL)",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"  // do whatever setup with the robot...",props:{style:{color:"#6C7086",fontStyle:"italic"}}}]},{tokens:[{content:"  return ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"<",props:{style:{color:"#7F849C"}}},{content:"primitive ",props:{style:{color:"#CBA6F7"}}},{content:"object",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"=",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"{",props:{style:{color:"#F38BA8"}}},{content:"robot",props:{style:{color:"#CDD6F4"}}},{content:"} ",props:{style:{color:"#F38BA8"}}},{content:"/>",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"}",props:{style:{color:"#7F849C"}}}]}],lang:"tsx"},annotations:[]}]}),"\n",(0,n.jsx)(t.h3,{id:"option-2",children:"Option 2"}),"\n",(0,n.jsxs)(t.p,{children:["We need to initialize ",(0,n.jsx)(t.code,{children:"URDFLoader"})," ourselves in order to remap the packages, basically create a dumb version of ",(0,n.jsx)(t.code,{children:"useLoader"}),", it doesn't have suspense / cache support so is less convenient"]}),"\n",(0,n.jsx)(k.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",mark:"8:10",focus:"",code:{lines:[{tokens:[{content:"import ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"{",props:{style:{color:"#7F849C"}}},{content:" useEffect, useState ",props:{style:{color:"#CDD6F4"}}},{content:"} ",props:{style:{color:"#7F849C"}}},{content:"from ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"'react'",props:{style:{color:"#A6E3A1"}}}]},{tokens:[{content:"import",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" URDFLoader, ",props:{style:{color:"#CDD6F4"}}},{content:"{",props:{style:{color:"#7F849C"}}},{content:" URDFRobot ",props:{style:{color:"#CDD6F4"}}},{content:"} ",props:{style:{color:"#7F849C"}}},{content:"from ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"'urdf-loader'",props:{style:{color:"#A6E3A1"}}}]},{tokens:[{content:"",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"const ",props:{style:{color:"#F38BA8"}}},{content:"Model ",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"() ",props:{style:{color:"#7F849C"}}},{content:"=> ",props:{style:{color:"#F38BA8"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"  const ",props:{style:{color:"#F38BA8"}}},{content:"[",props:{style:{color:"#7F849C"}}},{content:"robot, setRobot",props:{style:{color:"#CDD6F4"}}},{content:"] ",props:{style:{color:"#7F849C"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"useState",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"<",props:{style:{color:"#7F849C"}}},{content:"URDFRobot",props:{style:{color:"#FAB387"}}},{content:">",props:{style:{color:"#7F849C"}}},{content:"()",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"  useEffect",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(",props:{style:{color:"#CDD6F4"}}},{content:"() ",props:{style:{color:"#7F849C"}}},{content:"=> ",props:{style:{color:"#F38BA8"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"    const",props:{style:{color:"#F38BA8"}}},{content:" loader ",props:{style:{color:"#CDD6F4"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"new ",props:{style:{color:"#F38BA8",fontWeight:"bold"}}},{content:"URDFLoader",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"()",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"    loader",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"packages ",props:{style:{color:"#F2CDCD"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"      my_pkg: ",props:{style:{color:"#CDD6F4"}}},{content:"'./models/foo'",props:{style:{color:"#A6E3A1"}}},{content:",",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"    loader",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"load",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(",props:{style:{color:"#CDD6F4"}}},{content:"`",props:{style:{color:"#7F849C"}}},{content:"./models/foo/urdf/foo.urdf",props:{style:{color:"#A6E3A1"}}},{content:"`",props:{style:{color:"#7F849C"}}},{content:", ",props:{style:{color:"#CDD6F4"}}},{content:"(",props:{style:{color:"#7F849C"}}},{content:"robot",props:{style:{color:"#CDD6F4",fontStyle:"italic"}}},{content:") ",props:{style:{color:"#7F849C"}}},{content:"=> ",props:{style:{color:"#F38BA8"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"      // do whatever setup with the robot...",props:{style:{color:"#6C7086",fontStyle:"italic"}}}]},{tokens:[{content:"      setRobot",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(robot)",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#7F849C"}}},{content:")",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"  }",props:{style:{color:"#7F849C"}}},{content:", [])",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"  return",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" robot ",props:{style:{color:"#CDD6F4"}}},{content:"&& ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"<",props:{style:{color:"#7F849C"}}},{content:"primitive ",props:{style:{color:"#CBA6F7"}}},{content:"object",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"=",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"{",props:{style:{color:"#F38BA8"}}},{content:"robot",props:{style:{color:"#CDD6F4"}}},{content:"} ",props:{style:{color:"#F38BA8"}}},{content:"/>",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"}",props:{style:{color:"#7F849C"}}}]}],lang:"tsx"},annotations:[{focus:"8:10",Component:k.annotations.mark}]}]}),"\n",(0,n.jsx)(t.h2,{id:"make-the-model-move",children:"Make the Model Move"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"URDFRobot"})," extends ",(0,n.jsx)(t.code,{children:"Object3D"}),", it also provides the ",(0,n.jsx)(t.code,{children:"setJointValue"})," function that would take joint type into account."]}),"\n",(0,n.jsx)(t.p,{children:"Here's an example that changes the robot position and wheel joint values"}),"\n",(0,n.jsx)(k.Code,{codeConfig:m,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"const",props:{style:{color:"#F38BA8"}}},{content:" maxVel ",props:{style:{color:"#CDD6F4"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"0.6",props:{style:{color:"#FAB387",fontWeight:"bold"}}}]},{tokens:[{content:"const",props:{style:{color:"#F38BA8"}}},{content:" wheelRadius ",props:{style:{color:"#CDD6F4"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"0.04",props:{style:{color:"#FAB387",fontWeight:"bold"}}}]},{tokens:[{content:"const",props:{style:{color:"#F38BA8"}}},{content:" trackRadius ",props:{style:{color:"#CDD6F4"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"0.5",props:{style:{color:"#FAB387",fontWeight:"bold"}}}]},{tokens:[{content:"",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"const ",props:{style:{color:"#F38BA8"}}},{content:"Model ",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"= ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"() ",props:{style:{color:"#7F849C"}}},{content:"=> ",props:{style:{color:"#F38BA8"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"  // load robot as above ...",props:{style:{color:"#6C7086",fontStyle:"italic"}}}]},{tokens:[{content:"",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"  useFrame",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(",props:{style:{color:"#CDD6F4"}}},{content:"({",props:{style:{color:"#7F849C"}}},{content:" clock: ",props:{style:{color:"#CDD6F4"}}},{content:"{ ",props:{style:{color:"#7F849C"}}},{content:"elapsedTime ",props:{style:{color:"#CDD6F4",fontStyle:"italic"}}},{content:"} }) ",props:{style:{color:"#7F849C"}}},{content:"=> ",props:{style:{color:"#F38BA8"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"    if",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" (robot) ",props:{style:{color:"#CDD6F4"}}},{content:"{",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"      // the wheels should really rotate at different speed to make the",props:{style:{color:"#6C7086",fontStyle:"italic"}}}]},{tokens:[{content:"      // robot turn, but my eyes don't tell the difference anyway",props:{style:{color:"#6C7086",fontStyle:"italic"}}}]},{tokens:[{content:"      const",props:{style:{color:"#F38BA8"}}},{content:" wheelAngle ",props:{style:{color:"#CDD6F4"}}},{content:"=",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" elapsedTime ",props:{style:{color:"#CDD6F4"}}},{content:"*",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" (maxVel ",props:{style:{color:"#CDD6F4"}}},{content:"/",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" wheelRadius)",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"      const",props:{style:{color:"#F38BA8"}}},{content:" theta ",props:{style:{color:"#CDD6F4"}}},{content:"=",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" elapsedTime ",props:{style:{color:"#CDD6F4"}}},{content:"*",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" (maxVel ",props:{style:{color:"#CDD6F4"}}},{content:"/",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" trackRadius)",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"      robot",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"joints",props:{style:{color:"#F2CDCD"}}},{content:"[",props:{style:{color:"#CDD6F4"}}},{content:"'base_link_to_left_wheel'",props:{style:{color:"#A6E3A1"}}},{content:"].",props:{style:{color:"#CDD6F4"}}},{content:"setJointValue",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(wheelAngle)",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"      robot",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"joints",props:{style:{color:"#F2CDCD"}}},{content:"[",props:{style:{color:"#CDD6F4"}}},{content:"'base_link_to_right_wheel'",props:{style:{color:"#A6E3A1"}}},{content:"].",props:{style:{color:"#CDD6F4"}}},{content:"setJointValue",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(wheelAngle)",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"      robot",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"position",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"set",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(trackRadius ",props:{style:{color:"#CDD6F4"}}},{content:"* ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"Math",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"sin",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(theta), ",props:{style:{color:"#CDD6F4"}}},{content:"0",props:{style:{color:"#FAB387",fontWeight:"bold"}}},{content:", trackRadius ",props:{style:{color:"#CDD6F4"}}},{content:"* ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"Math",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"cos",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(theta))",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"      robot",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"rotation",props:{style:{color:"#F2CDCD"}}},{content:".",props:{style:{color:"#CDD6F4"}}},{content:"set",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"(",props:{style:{color:"#CDD6F4"}}},{content:"-",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"Math",props:{style:{color:"#F2CDCD"}}},{content:".PI ",props:{style:{color:"#CDD6F4"}}},{content:"/ ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"2",props:{style:{color:"#FAB387",fontWeight:"bold"}}},{content:", ",props:{style:{color:"#CDD6F4"}}},{content:"0",props:{style:{color:"#FAB387",fontWeight:"bold"}}},{content:", theta)",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"    }",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"  }",props:{style:{color:"#7F849C"}}},{content:")",props:{style:{color:"#CDD6F4"}}}]},{tokens:[{content:"  return",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:" robot ",props:{style:{color:"#CDD6F4"}}},{content:"&& ",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"<",props:{style:{color:"#7F849C"}}},{content:"primitive ",props:{style:{color:"#CBA6F7"}}},{content:"object",props:{style:{color:"#89B4FA",fontStyle:"italic"}}},{content:"=",props:{style:{color:"#89DCEB",fontWeight:"bold"}}},{content:"{",props:{style:{color:"#F38BA8"}}},{content:"robot",props:{style:{color:"#CDD6F4"}}},{content:"} ",props:{style:{color:"#F38BA8"}}},{content:"/>",props:{style:{color:"#7F849C"}}}]},{tokens:[{content:"}",props:{style:{color:"#7F849C"}}}]}],lang:"tsx"},annotations:[]}]}),"\n",(0,n.jsx)("div",{style:{height:400},children:(0,n.jsxs)(F,{camera:{position:[0,1.2,1.2]},children:[(0,n.jsx)(l.JO,{args:[2,2],rotation:[-Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#ffb385"})}),(0,n.jsx)(D,{})]})}),"\n",(0,n.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"When doubt about the path, just open developer tools and switch to the network tab to see if the request url is correct"}),"\n",(0,n.jsxs)(t.li,{children:["The default coordinate system in ",(0,n.jsx)(t.a,{href:"https://threejs.org/",children:"three.js"})," have y-axis pointing up instead of z-axis like in most conventions, just rotate the model in x-axis by ",(0,n.jsx)(t.code,{children:"-Math.PI / 2"})]}),"\n"]}),"\n",(0,n.jsxs)(t.section,{"data-footnotes":!0,className:"footnotes",children:[(0,n.jsx)(t.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{id:"user-content-fn-1",children:["\n",(0,n.jsxs)(t.p,{children:["A react renderer for ",(0,n.jsx)(t.a,{href:"https://threejs.org/",children:"three.js"})," ",(0,n.jsx)(t.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{id:"user-content-fn-2",children:["\n",(0,n.jsxs)(t.p,{children:["The packages option is documented ",(0,n.jsx)(t.a,{href:"https://github.com/gkjohnson/urdf-loaders/tree/master/javascript#packages",children:"here"})," ",(0,n.jsx)(t.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function j(o={}){const{wrapper:t}={...(0,s.a)(),...o.components};return t?(0,n.jsx)(t,{...o,children:(0,n.jsx)(x,{...o})}):x(o)}function A(o,t){throw new Error("Expected "+(t?"component":"object")+" `"+o+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);