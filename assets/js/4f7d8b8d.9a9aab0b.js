"use strict";(self.webpackChunkwty_blog=self.webpackChunkwty_blog||[]).push([[914],{7442:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>p,contentTitle:()=>g,default:()=>b,frontMatter:()=>m,metadata:()=>u,toc:()=>h});var n=s(6070),r=s(5658),t=s(758),a=s(1804);const d=a.Ay.div`
  background-color: rgba(var(--ifm-color-primary-rgb), 0.2);
  color: var(--ifm-color-primary);
  opacity: 99%;
  margin-top: calc(-1 * var(--ifm-leading) - var(--ifm-global-radius));
  margin-bottom: var(--ifm-leading);
  padding-top: calc(var(--ifm-pre-padding) / 3);
  padding-bottom: calc(var(--ifm-pre-padding) / 3);
  padding-right: var(--ifm-pre-padding);
  padding-left: var(--ifm-pre-padding);
  border-bottom-right-radius: var(--ifm-global-radius);
  border-bottom-left-radius: var(--ifm-global-radius);
  pointer-events: none;
`,i=a.Ay.div`
  text-align: right;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
`,l=a.Ay.div`
  padding-top: calc(var(--ifm-pre-padding) / 3);
  padding-bottom: calc(var(--ifm-pre-padding) / 3);
  border-top: 1px solid var(--ifm-color-primary);
  pointer-events: auto;

  & > :last-child {
    margin-bottom: 0;
  }
`,c=e=>{let{children:o,defaultOpen:s=!1,showText:r="More",hideText:a="Hide"}=e;const[c,m]=(0,t.useState)(s),[g,...u]=t.Children.toArray(o);return(0,n.jsxs)(n.Fragment,{children:[g,u&&(0,n.jsxs)(d,{children:[(0,n.jsx)(i,{onClick:()=>m((e=>!e)),children:c?a:r}),c&&(0,n.jsx)(l,{children:u})]})]})},m={id:"roslisp-usage",title:"Roslisp Usage"},g=void 0,u={id:"ros/roslisp-usage",title:"Roslisp Usage",description:"Supplement to roslisp wiki",source:"@site/notes/ros/roslisp-usage.mdx",sourceDirName:"ros",slug:"/ros/roslisp-usage",permalink:"/ros/roslisp-usage",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"roslisp-usage",title:"Roslisp Usage"},sidebar:"tutorialSidebar",previous:{title:"ROS",permalink:"/category/ros"},next:{title:"Environment Setup",permalink:"/category/environment-setup"}},p={},h=[{value:"Manage Node",id:"manage-node",level:2},{value:"<code>start-ros-node</code>",id:"start-ros-node",level:3},{value:"<code>shutdown-ros-node</code>",id:"shutdown-ros-node",level:3},{value:"<code>with-ros-node</code>",id:"with-ros-node",level:3},{value:"<code>node-status</code>",id:"node-status",level:3},{value:"Messages",id:"messages",level:2},{value:"<code>make-message</code>",id:"make-message",level:3},{value:"<code>symbol-codes</code>",id:"symbol-codes",level:3},{value:"<code>symbol-code</code>",id:"symbol-code",level:3},{value:"<code>code-symbols</code>",id:"code-symbols",level:3},{value:"<code>code-symbol</code>",id:"code-symbol",level:3},{value:"Time",id:"time",level:2},{value:"<code>ros-time</code>",id:"ros-time",level:3},{value:"Logging",id:"logging",level:2},{value:"<code>ros-info</code>",id:"ros-info",level:3}];function y(e){const o={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",...(0,r.R)(),...e.components},{Code:s}=o;return s||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.p,{children:["Supplement to ",(0,n.jsx)(o.a,{href:"http://wiki.ros.org/roslisp/Overview",children:"roslisp wiki"})]}),"\n",(0,n.jsx)(o.h2,{id:"manage-node",children:"Manage Node"}),"\n",(0,n.jsx)(o.h3,{id:"start-ros-node",children:(0,n.jsx)(o.code,{children:"start-ros-node"})}),"\n",(0,n.jsxs)(c,{children:[(0,n.jsx)(s,{codeblock:{value:'(start-ros-node "node_name")',lang:"common-lisp",meta:"",code:'(start-ros-node "node_name")',tokens:[["(start-ros-node","#C6D0F5"]," ",['"node_name"',"#A6D189"],[")","#C6D0F5"]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),(0,n.jsxs)(o.p,{children:["After the node starts, ",(0,n.jsx)(o.code,{children:"*node-status*"})," will be set to ",(0,n.jsx)(o.code,{children:":running"})]})]}),"\n",(0,n.jsx)(o.h3,{id:"shutdown-ros-node",children:(0,n.jsx)(o.code,{children:"shutdown-ros-node"})}),"\n",(0,n.jsx)(s,{codeblock:{value:"(shutdown-ros-node)",lang:"common-lisp",meta:"",code:"(shutdown-ros-node)",tokens:[["(shutdown-ros-node)","#C6D0F5"]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h3,{id:"with-ros-node",children:(0,n.jsx)(o.code,{children:"with-ros-node"})}),"\n",(0,n.jsx)(s,{codeblock:{value:'(with-ros-node ("node_name")\n  (...))\n\n;; for long running task/service, use:\n(with-ros-node ("node_name" :spin t)\n  (...))',lang:"common-lisp",meta:"",code:'(with-ros-node ("node_name")\n  (...))\n\n;; for long running task/service, use:\n(with-ros-node ("node_name" :spin t)\n  (...))',tokens:[["(with-ros-node (","#C6D0F5"],['"node_name"',"#A6D189"],[")","#C6D0F5"],"\n  ",["(...))","#C6D0F5"],"\n\n",[";; for long running task/service, use:","#737994",{fontStyle:"italic"}],"\n",["(with-ros-node (","#C6D0F5"],['"node_name"',"#A6D189"]," ",[":spin","#C6D0F5"]," ",["t","#E78284"],[")","#C6D0F5"],"\n  ",["(...))","#C6D0F5"]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h3,{id:"node-status",children:(0,n.jsx)(o.code,{children:"node-status"})}),"\n",(0,n.jsx)(s,{codeblock:{value:"(node-status)\n;; returns either :running or :shutdown",lang:"common-lisp",meta:"",code:"(node-status)\n;; returns either :running or :shutdown",tokens:[["(node-status)","#C6D0F5"],"\n",[";; returns either :running or :shutdown","#737994",{fontStyle:"italic"}]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h2,{id:"messages",children:"Messages"}),"\n",(0,n.jsx)(o.h3,{id:"make-message",children:(0,n.jsx)(o.code,{children:"make-message"})}),"\n",(0,n.jsx)(s,{codeblock:{value:';; use symbol as msg-type\n(make-message \'std_msgs-msg:String\n              :data "Hello World")\n\n;; use string as msg-type\n(make-message "std_msgs/String"\n              :data "Hello World")\n\n;; fill in nested fields\n(make-message "geometry_msgs/PoseStamped"\n              :header (make-message "std_msgs/Header"\n                                    :frame_id "map")\n              (:w :orientation :pose) 1.0)',lang:"common-lisp",meta:"",code:';; use symbol as msg-type\n(make-message \'std_msgs-msg:String\n              :data "Hello World")\n\n;; use string as msg-type\n(make-message "std_msgs/String"\n              :data "Hello World")\n\n;; fill in nested fields\n(make-message "geometry_msgs/PoseStamped"\n              :header (make-message "std_msgs/Header"\n                                    :frame_id "map")\n              (:w :orientation :pose) 1.0)',tokens:[[";; use symbol as msg-type","#737994",{fontStyle:"italic"}],"\n",["(make-message","#C6D0F5"]," ",["'","#EF9F76"],["std_msgs-msg:String","#C6D0F5"],"\n              ",[":data","#C6D0F5"]," ",['"Hello World"',"#A6D189"],[")","#C6D0F5"],"\n\n",[";; use string as msg-type","#737994",{fontStyle:"italic"}],"\n",["(make-message","#C6D0F5"]," ",['"std_msgs/String"',"#A6D189"],"\n              ",[":data","#C6D0F5"]," ",['"Hello World"',"#A6D189"],[")","#C6D0F5"],"\n\n",[";; fill in nested fields","#737994",{fontStyle:"italic"}],"\n",["(make-message","#C6D0F5"]," ",['"geometry_msgs/PoseStamped"',"#A6D189"],"\n              ",[":header (make-message","#C6D0F5"]," ",['"std_msgs/Header"',"#A6D189"],"\n                                    ",[":frame_id","#C6D0F5"]," ",['"map"',"#A6D189"],[")","#C6D0F5"],"\n              ",["(:w :orientation :pose)","#C6D0F5"]," ",["1.0","#EF9F76"],[")","#C6D0F5"]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h3,{id:"symbol-codes",children:(0,n.jsx)(o.code,{children:"symbol-codes"})}),"\n",(0,n.jsx)(s,{codeblock:{value:';; use symbol as msg-type\n(symbol-codes \'sensor_msgs-msg:Range)\n\n;; use instance as msg-type\n(symbol-codes (make-message "sensor_msgs/Range"))\n\n;; returns: ((:ULTRASOUND . 0) (:INFRARED . 1))',lang:"common-lisp",meta:"",code:';; use symbol as msg-type\n(symbol-codes \'sensor_msgs-msg:Range)\n\n;; use instance as msg-type\n(symbol-codes (make-message "sensor_msgs/Range"))\n\n;; returns: ((:ULTRASOUND . 0) (:INFRARED . 1))',tokens:[[";; use symbol as msg-type","#737994",{fontStyle:"italic"}],"\n",["(symbol-codes","#C6D0F5"]," ",["'","#EF9F76"],["sensor_msgs-msg:Range)","#C6D0F5"],"\n\n",[";; use instance as msg-type","#737994",{fontStyle:"italic"}],"\n",["(symbol-codes (make-message","#C6D0F5"]," ",['"sensor_msgs/Range"',"#A6D189"],["))","#C6D0F5"],"\n\n",[";; returns: ((:ULTRASOUND . 0) (:INFRARED . 1))","#737994",{fontStyle:"italic"}]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h3,{id:"symbol-code",children:(0,n.jsx)(o.code,{children:"symbol-code"})}),"\n",(0,n.jsx)(s,{codeblock:{value:"(symbol-code 'sensor_msgs-msg:Range :ultrasound)\n;; returns: 0",lang:"common-lisp",meta:"",code:"(symbol-code 'sensor_msgs-msg:Range :ultrasound)\n;; returns: 0",tokens:[["(symbol-code","#C6D0F5"]," ",["'","#EF9F76"],["sensor_msgs-msg:Range :ultrasound)","#C6D0F5"],"\n",[";; returns: 0","#737994",{fontStyle:"italic"}]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h3,{id:"code-symbols",children:(0,n.jsx)(o.code,{children:"code-symbols"})}),"\n",(0,n.jsx)(s,{codeblock:{value:"(code-symbols 'visualization_msgs-msg:Marker 0)\n;; returns: ((:ARROW . 0) (:ADD . 0) (:MODIFY . 0))",lang:"common-lisp",meta:"",code:"(code-symbols 'visualization_msgs-msg:Marker 0)\n;; returns: ((:ARROW . 0) (:ADD . 0) (:MODIFY . 0))",tokens:[["(code-symbols","#C6D0F5"]," ",["'","#EF9F76"],["visualization_msgs-msg:Marker","#C6D0F5"]," ",["0","#EF9F76"],[")","#C6D0F5"],"\n",[";; returns: ((:ARROW . 0) (:ADD . 0) (:MODIFY . 0))","#737994",{fontStyle:"italic"}]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h3,{id:"code-symbol",children:(0,n.jsx)(o.code,{children:"code-symbol"})}),"\n",(0,n.jsx)(s,{codeblock:{value:"(code-symbol 'visualization_msgs-msg:Marker 0)\n;; returns: :ARROW (first found)",lang:"common-lisp",meta:"",code:"(code-symbol 'visualization_msgs-msg:Marker 0)\n;; returns: :ARROW (first found)",tokens:[["(code-symbol","#C6D0F5"]," ",["'","#EF9F76"],["visualization_msgs-msg:Marker","#C6D0F5"]," ",["0","#EF9F76"],[")","#C6D0F5"],"\n",[";; returns: :ARROW (first found)","#737994",{fontStyle:"italic"}]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),"\n",(0,n.jsx)(o.h2,{id:"time",children:"Time"}),"\n",(0,n.jsx)(o.h3,{id:"ros-time",children:(0,n.jsx)(o.code,{children:"ros-time"})}),"\n",(0,n.jsxs)(c,{children:[(0,n.jsx)(s,{codeblock:{value:"(ros-time)\n;; returns the number of seconds since January 1st, 1970",lang:"common-lisp",meta:"",code:"(ros-time)\n;; returns the number of seconds since January 1st, 1970",tokens:[["(ros-time)","#C6D0F5"],"\n",[";; returns the number of seconds since January 1st, 1970","#737994",{fontStyle:"italic"}]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),(0,n.jsxs)(o.p,{children:["It uses ",(0,n.jsx)(o.code,{children:"sb-ext:get-time-of-day"})," under the hood"]})]}),"\n",(0,n.jsx)(o.h2,{id:"logging",children:"Logging"}),"\n",(0,n.jsx)(o.h3,{id:"ros-info",children:(0,n.jsx)(o.code,{children:"ros-info"})}),"\n",(0,n.jsxs)(c,{children:[(0,n.jsx)(s,{codeblock:{value:'(ros-info (foo bar) "Hello, ~A" "World")\n;; outputs: [(FOO BAR) INFO] 1625730154.129: Hello, World\n\n(ros-info (monitor) (< battery-level 20) "Battery Low")\n;; The second argument can be a condition, works like `ROS_INFO_COND` in roscpp',lang:"common-lisp",meta:"",code:'(ros-info (foo bar) "Hello, ~A" "World")\n;; outputs: [(FOO BAR) INFO] 1625730154.129: Hello, World\n\n(ros-info (monitor) (< battery-level 20) "Battery Low")\n;; The second argument can be a condition, works like `ROS_INFO_COND` in roscpp',tokens:[["(ros-info (foo bar)","#C6D0F5"]," ",['"Hello, ~A" "World"',"#A6D189"],[")","#C6D0F5"],"\n",[";; outputs: [(FOO BAR) INFO] 1625730154.129: Hello, World","#737994",{fontStyle:"italic"}],"\n\n",["(ros-info (monitor) (","#C6D0F5"],["<","#8CAAEE"]," ",["battery-level","#C6D0F5"]," ",["20","#EF9F76"],[")","#C6D0F5"]," ",['"Battery Low"',"#A6D189"],[")","#C6D0F5"],"\n",[";; The second argument can be a condition, works like `ROS_INFO_COND` in roscpp","#737994",{fontStyle:"italic"}]],annotations:[],themeName:"Catppuccin Frapp\xe9",style:{color:"#c6d0f5",background:"#303446",colorScheme:"dark"}}}),(0,n.jsxs)(o.p,{children:["The same for ",(0,n.jsx)(o.code,{children:"ros-debug"}),", ",(0,n.jsx)(o.code,{children:"ros-warn"}),", ",(0,n.jsx)(o.code,{children:"ros-error"}),", and ",(0,n.jsx)(o.code,{children:"ros-fatal"})]})]})]})}function b(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(y,{...e})}):y(e)}}}]);